<button class="green-button" ng-click="eventsCtrl.newEvent=!eventsCtrl.newEvent">Make a New Event</button>

<ul class="cbp_tmtimeline">
    <li ng-repeat="event in eventsCtrl.events | filter: search | orderBy: '-date'">

        
            
            <div ng-if="event.emotion == 'joy'">
                <time class="cbp_tmtime" ><span ng-style="{ 'color': eventsCtrl.userInfo.joy }">{{ event.emotion }}</span> <span ng-style="{ 'color': eventsCtrl.userInfo.joy }">{{ event.date | date: 'MMM d, yyyy' }}</span></time>
            </div>
            
            <div ng-if="event.emotion == 'acceptance'">
                <time class="cbp_tmtime" ><span ng-style="{ 'color': eventsCtrl.userInfo.acceptance }">{{ event.emotion }}</span> <span ng-style="{ 'color': eventsCtrl.userInfo.acceptance }">{{ event.date | date: 'MMM d, yyyy' }}</span></time>
            </div>
            
            <div ng-if="event.emotion == 'fear'">
                <time class="cbp_tmtime" ><span ng-style="{ 'color': eventsCtrl.userInfo.fear }">{{ event.emotion }}</span> <span ng-style="{ 'color': eventsCtrl.userInfo.fear }">{{ event.date | date: 'MMM d, yyyy' }}</span></time>
            </div>
            
            <div ng-if="event.emotion == 'surprise'">
                <time class="cbp_tmtime" ><span ng-style="{ 'color': eventsCtrl.userInfo.surprise }">{{ event.emotion }}</span> <span ng-style="{ 'color': eventsCtrl.userInfo.surprise }">{{ event.date | date: 'MMM d, yyyy' }}</span></time>
            </div>
            
            <div ng-if="event.emotion == 'sadness'">
                <time class="cbp_tmtime" ><span ng-style="{ 'color': eventsCtrl.userInfo.sadness }">{{ event.emotion }}</span> <span ng-style="{ 'color': eventsCtrl.userInfo.sadness }">{{ event.date | date: 'MMM d, yyyy' }}</span></time>
            </div>
            
            <div ng-if="event.emotion == 'disgust'">
                <time class="cbp_tmtime" ><span ng-style="{ 'color': eventsCtrl.userInfo.disgust }">{{ event.emotion }}</span> <span ng-style="{ 'color': eventsCtrl.userInfo.disgust }">{{ event.date | date: 'MMM d, yyyy' }}</span></time>
            </div>
            
            <div ng-if="event.emotion == 'anger'">
                <time class="cbp_tmtime" ><span ng-style="{ 'color': eventsCtrl.userInfo.anger }">{{ event.emotion }}</span> <span ng-style="{ 'color': eventsCtrl.userInfo.anger }">{{ event.date | date: 'MMM d, yyyy' }}</span></time>
            </div>
            
            <div ng-if="!eventsCtrl.editing">
            
            <div class="cbp_tmicon cbp_tmicon-phone"></div>
            <div class="cbp_tmlabel">
                
                    <h3>{{ event.title }}</h3>

                    <p><strong>{{ event.location }}</strong> w/ <strong>{{ event.people_involved }}</strong></p>
                    
                    <p>{{ event.situation }}</p>    
                    
                    <p>I felt <strong>{{ event.emotion }}</strong>.</p>

                    <p><strong>{{ event.bodily_sensations }}</strong> were triggered by <strong>{{ event.triggers }}</strong>.</p>
                    
                    <p> At first, I thought: <strong>{{ event.automatic_thoughts }}</strong>
                    But when I had a chance to think about what had happened I realized: <strong>{{ event.rational_thoughts }}</strong></p>
                    
                    <p><strong>{{ event.behaviors }} </strong></p>
                    <p><strong>{{ event.consequences }}</strong></p>
                    <p><strong>{{ event.challenged_beliefs }}</strong></p>

                    <p>What did I take away from this experience? <strong>{{ event.lesson }}</strong></p>

                    <p>My old perspective: <strong>{{ event.old_perspective }}</strong></p>
                    
                    <p>My new perspective: <strong>{{ event.new_perspective }}</strong></p>
                    
                    <p>Next time use the following coping strategies: <strong>{{ event.coping_strategies }}</strong></p>
                    
                    <button class="blue-button" ng-click="eventsCtrl.getEventAPI(eventsCtrl.params, event._id); eventsCtrl.editing=!eventsCtrl.editing">Edit</button>
                    <button class="red-button" ng-click="eventsCtrl.deleteEventAPI(eventsCtrl.params, event._id)">Delete</button>
            </div>
         
         </div>
         <div ng-if="eventsCtrl.event._id); eventsCtrl.editing">
             
            
            <div class="cbp_tmicon cbp_tmicon-phone"></div>
            <div class="cbp_tmlabel">
                <form id="edit-event-form" ng-submit="eventsCtrl.putEventAPI(eventsCtrl.params, eventsCtrl.eventInfo._id)">
                    <h2>Edit "{{ eventsCtrl.updatedEventInfo.title }}"</h2><br>               
                    <div class="left">                
                        <input type="text" id="title" placeholder="title" ng-model="eventsCtrl.updatedEventInfo.title">
                        <label for="title" class="bottom-padding">Title</label>

                        <input type="date" id="date" ng-model="eventsCtrl.updatedEventInfo.date">
                        <label for="date" class="bottom-padding">Date</label>
                        
                        <input type="text" id="location" placeholder="location" ng-model="eventsCtrl.updatedEventInfo.location">
                        <label for="location" class="bottom-padding">Location</label>

                        <input type="text" id="people_involved" placeholder="people" ng-model="eventsCtrl.updatedEventInfo.people_involved">
                        <label for="people_involved" class="bottom-padding">People Involved</label><br>

                        <label for="situation">Situation</label>
                        <textarea type="text-area" class="bottom-padding" id="situation" placeholder="situation" ng-model="eventsCtrl.updatedEventInfo.situation"></textarea>

                        <label for="emotion">Emotion</label>
                        <select name="emotion" class="bottom-padding" ng-model="eventsCtrl.updatedEventInfo.emotion">
                            <option value="joy">Joy</option>
                            <option value="acceptance">Acceptance</option>
                            <option value="fear">Fear</option>
                            <option value="surprise">Surprise</option>
                            <option value="sadness">Sadness</option>
                            <option value="disgust">Disgust</option>
                            <option value="anger">Anger</option>
                            <option value="anticipation">Anticipation</option>
                        </select>
                        
                        <label for="triggers">Triggers</label>
                        <textarea type="text-area" class="bottom-padding" id="triggers" placeholder="triggers" ng-model="eventsCtrl.updatedEventInfo.triggers"></textarea>

                        <label for="automatic_thoughts">Automatic Thoughts</label>
                        <textarea type="text-area" class="bottom-padding" id="automatic_thoughts" placeholder="automatic thoughts" ng-model="eventsCtrl.updatedEventInfo.automatic_thoughts"></textarea>

                        <label for="rational_response">Rational Response</label>
                        <textarea type="text-area" class="bottom-padding" id="rational_response" placeholder="rational response" ng-model="eventsCtrl.updatedEventInfo.rational_response"></textarea>

                        <!--<label for="behaviors">Behaviors</label>
                        <textarea type="text-area" id="behaviors" placeholder="behaviors" ng-model="eventsCtrl.updatedEventInfo.behaviors"></textarea>

                        <label for="consequences">Consequences</label>
                        <textarea type="text-area" id="consequences" placeholder="consequences" ng-model="eventsCtrl.updatedEventInfo.consequences"></textarea>-->

                        <label for="challenged_beliefs">Challenged Beliefs Involved</label>
                        <textarea type="text-area" class="bottom-padding" id="challenged_beliefs" placeholder="challenged beliefs" ng-model="eventsCtrl.updatedEventInfo.challenged_beliefs"></textarea>
                        
                        <input type="text" id="lesson" placeholder="lesson" ng-model="eventsCtrl.updatedEventInfo.lesson">
                        <label for="lesson" class="bottom-padding">Lesson in 140 char (Twitter-ified)</label><br>
                        
                        <label for="old_perspective">Old Perspective</label>
                        <textarea type="text-area" class="bottom-padding" id="old_perspective" placeholder="old perspective" ng-model="eventsCtrl.updatedEventInfo.old_perspective"></textarea>

                        <label for="new_perspective">New Perspective</label>
                        <textarea type="text-area" class="bottom-padding" id="new_perspective" placeholder="new perspective" ng-model="eventsCtrl.updatedEventInfo.new_perspective"></textarea>

                        <label for="coping_strategies">Coping Strategies</label>
                        <textarea type="text-area" id="coping_strategies" placeholder="coping strategies" ng-model="eventsCtrl.updatedEventInfo.coping_strategies"></textarea>
                    </div>
                    
                    <div class="right">
                        <img src="../../assets/body.png" alt="">
                        
                        <!--<label>Bodily Sensations Involved</label>-->
                        <fieldset ng-model="bodily_sensations">
                            <input type="radio" id="chronic_headaches" value="Chronic Headaches" ng-model="eventsCtrl.updatedEventInfo.bodily_sensations">
                            <label for="chronic_headaches">Chronic Headaches</label><br>
                            
                            <input type="radio" id="back_problems" value="Back Problems" ng-model="eventsCtrl.updatedEventInfo.bodily_sensations">
                            <label for="back_problems">Back Problems</label><br>
                            
                            <input type="radio" id="arthritis" value="Arthritis" ng-model="eventsCtrl.updatedEventInfo.bodily_sensations">
                            <label for="arthritis">Arthritis</label><br>
                            
                            <input type="radio" id="muscle_aches_and_cramps" value="Muscle Aches and Cramps" ng-model="eventsCtrl.updatedEventInfo.bodily_sensations">
                            <label for="muscle_aches_and_cramps">Muscle Aches and Cramps</label><br>
                            
                            <input type="radio" id="pelvic_pain" value="pelvic_pain" ng-model="eventsCtrl.updatedEventInfo.bodily_sensations">
                            <label for="pelvic_pain">Pelvic Pain</label><br>
                        </fieldset>
                    </div>
                    
                    <div style="clear:both;"></div>
                    <button type="submit">Edit Event</button>
                </form> 
            </div>
         </div>
    </li>
</ul>


